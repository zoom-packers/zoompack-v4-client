const CONFIG_DATA = { "Misc": { "rarityConfig": [0.6, 0.3, 0.05, 0.025, 0.005], "swordsConsumeMana": true, "swordsCooldownMultiplier": 0.75, "canAttackOwnSummons": false, "maxUpgrades": 3, "manaSpawnPercent": 0.0, "scrollRecycleChance": 0.7, "allowCauldronBrewing": true, "furledMapSkipsExistingChunks": true, "applyAllMultihandAttributes": true, "betterCreeperThunderHit": true, "spellGriefing": false, "additionalWanderingTraderTrades": true, "disableAdventureModeCasting": false }, "Upgrade Overrides": { "upgradeWhitelist": [], "upgradeBlacklist": [], "scrollMerging": true }, "Imbue Overrides": { "imbueWhitelist": [], "imbueBlacklist": [] }, "Worldgen": { "priestHouseWeight": 4 }, "Spells": { "irons_spellbooks:fireball": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.238, "CooldownInSeconds": 240.0, "AllowCrafting": true }, "irons_spellbooks:heat_surge": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.035, "CooldownInSeconds": 1200.0, "AllowCrafting": false }, "irons_spellbooks:wall_of_fire": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 4.5, "SpellPowerMultiplier": 0.63, "CooldownInSeconds": 225.0, "AllowCrafting": true }, "irons_spellbooks:fire_breath": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.364, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:magma_bomb": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.12, "CooldownInSeconds": 240.0, "AllowCrafting": true }, "irons_spellbooks:scorch": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.84, "CooldownInSeconds": 90.0, "AllowCrafting": true }, "irons_spellbooks:burning_dash": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.07, "CooldownInSeconds": 160.0, "AllowCrafting": true }, "irons_spellbooks:blaze_storm": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 3.0, "SpellPowerMultiplier": 0.56, "CooldownInSeconds": 160.0, "AllowCrafting": true }, "irons_spellbooks:firebolt": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.47, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:flaming_barrage": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.5, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:flaming_strike": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.525, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:poison_arrow": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.525, "CooldownInSeconds": 100.0, "AllowCrafting": true }, "irons_spellbooks:earthquake": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0875, "CooldownInSeconds": 120.0, "AllowCrafting": true }, "irons_spellbooks:poison_splash": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.77, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:oakskin": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.07, "CooldownInSeconds": 6000.0, "AllowCrafting": false }, "irons_spellbooks:spider_aspect": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.07, "CooldownInSeconds": 6000.0, "AllowCrafting": false }, "irons_spellbooks:firefly_swarm": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.28, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:root": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 12.5, "SpellPowerMultiplier": 0.0017, "CooldownInSeconds": 400.0, "AllowCrafting": false }, "irons_spellbooks:blight": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 12.5, "SpellPowerMultiplier": 0.014, "CooldownInSeconds": 6000.0, "AllowCrafting": true }, "irons_spellbooks:stomp": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.525, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:acid_orb": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 5.5, "SpellPowerMultiplier": 0.35, "CooldownInSeconds": 2400.0, "AllowCrafting": false }, "irons_spellbooks:poison_breath": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.336, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:gluttony": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 12.5, "SpellPowerMultiplier": 0.084, "CooldownInSeconds": 3600.0, "AllowCrafting": false }, "irons_spellbooks:frostbite": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 7.5, "AllowCrafting": true }, "irons_spellbooks:ice_block": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.525, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:ray_of_frost": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0015, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:cone_of_cold": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.364, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:frost_step": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.07, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:frostwave": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0003, "CooldownInSeconds": 160.0, "AllowCrafting": true }, "irons_spellbooks:summon_polar_bear": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 1.2, "SpellPowerMultiplier": 0.01, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:icicle": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.4, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:arrow_volley": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 86.0, "AllowCrafting": true }, "irons_spellbooks:fang_ward": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.9, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:fang_strike": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.9, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:chain_creeper": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.33, "CooldownInSeconds": 82.0, "AllowCrafting": true }, "irons_spellbooks:gust": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:invisibility": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0105, "CooldownInSeconds": 360.0, "AllowCrafting": true }, "irons_spellbooks:summon_vex": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.015, "CooldownInSeconds": 360.0, "AllowCrafting": false }, "irons_spellbooks:lob_creeper": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 4.0, "SpellPowerMultiplier": 1.4, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:wololo": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 10.0, "AllowCrafting": true }, "irons_spellbooks:shield": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 3.0, "SpellPowerMultiplier": 0.35, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:summon_horse": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.2, "SpellPowerMultiplier": 0.01, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:spectral_hammer": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 12.5, "SpellPowerMultiplier": 0.0002, "CooldownInSeconds": 62.0, "AllowCrafting": false }, "irons_spellbooks:slow": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0021, "CooldownInSeconds": 600.0, "AllowCrafting": false }, "irons_spellbooks:firecracker": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:portal": { "Enabled": false, "School": "irons_spellbooks:ender", "MaxLevel": 1, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0005, "CooldownInSeconds": 630.0, "AllowCrafting": false }, "irons_spellbooks:black_hole": { "Enabled": false, "School": "irons_spellbooks:ender", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.001, "CooldownInSeconds": 2400.0, "AllowCrafting": false }, "irons_spellbooks:evasion": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 10, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.021, "CooldownInSeconds": 1200.0, "AllowCrafting": false }, "irons_spellbooks:recall": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 1, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:magic_missile": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:summon_ender_chest": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 1, "MinRarity": "RARE", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 8.0, "AllowCrafting": true }, "irons_spellbooks:magic_arrow": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.56, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:teleport": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.035, "CooldownInSeconds": 180.0, "AllowCrafting": true }, "irons_spellbooks:dragon_breath": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.31, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:counterspell": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:echoing_strikes": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.001, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:starfall": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.84, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:sculk_tentacles": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 21.0, "CooldownInSeconds": 360.0, "AllowCrafting": false }, "irons_spellbooks:telekinesis": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 5.0, "SpellPowerMultiplier": 0.007, "CooldownInSeconds": 120.0, "AllowCrafting": false }, "irons_spellbooks:planar_sight": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0052, "CooldownInSeconds": 80.0, "AllowCrafting": false }, "irons_spellbooks:eldritch_blast": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 3.0, "CooldownInSeconds": 120.0, "AllowCrafting": false }, "irons_spellbooks:abyssal_shroud": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.012, "CooldownInSeconds": 600.0, "AllowCrafting": false }, "irons_spellbooks:sonic_boom": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.5, "SpellPowerMultiplier": 1.25, "CooldownInSeconds": 60.0, "AllowCrafting": false }, "irons_spellbooks:healing_circle": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.35, "CooldownInSeconds": 180.0, "AllowCrafting": true }, "irons_spellbooks:blessing_of_life": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.35, "CooldownInSeconds": 80.0, "AllowCrafting": true }, "irons_spellbooks:angel_wing": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "EPIC", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0028, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:sunbeam": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.405, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:fortify": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 5.0, "SpellPowerMultiplier": 0.105, "CooldownInSeconds": 240.0, "AllowCrafting": true }, "irons_spellbooks:guiding_bolt": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.26, "CooldownInSeconds": 30.0, "AllowCrafting": true }, "irons_spellbooks:heal": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.84, "CooldownInSeconds": 180.0, "AllowCrafting": true }, "irons_spellbooks:haste": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.021, "CooldownInSeconds": 360.0, "AllowCrafting": false }, "irons_spellbooks:wisp": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 5.0, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:divine_smite": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.21, "CooldownInSeconds": 120.0, "AllowCrafting": true }, "irons_spellbooks:greater_heal": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 3.0, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 300.0, "AllowCrafting": false }, "irons_spellbooks:cloud_of_regeneration": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.105, "CooldownInSeconds": 240.0, "AllowCrafting": false }, "irons_spellbooks:raise_dead": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 3.2, "SpellPowerMultiplier": 0.105, "CooldownInSeconds": 1200.0, "AllowCrafting": false }, "irons_spellbooks:blood_slash": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 30.0, "AllowCrafting": true }, "irons_spellbooks:blood_step": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.07, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:acupuncture": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0105, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:ray_of_siphoning": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 4.0, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:blood_needles": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.065, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:sacrifice": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:heartstop": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.001, "CooldownInSeconds": 600.0, "AllowCrafting": true }, "irons_spellbooks:devour": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.7, "CooldownInSeconds": 120.0, "AllowCrafting": true }, "irons_spellbooks:wither_skull": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 4.0, "SpellPowerMultiplier": 1.15, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "irons_spellbooks:thunder_step": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.07, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:thunderstorm": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0105, "CooldownInSeconds": 600.0, "AllowCrafting": false }, "irons_spellbooks:ascension": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.05, "CooldownInSeconds": 112.5, "AllowCrafting": true }, "irons_spellbooks:lightning_lance": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.3, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:shockwave": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.5, "CooldownInSeconds": 240.0, "AllowCrafting": true }, "irons_spellbooks:electrocute": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.35, "CooldownInSeconds": 90.0, "AllowCrafting": true }, "irons_spellbooks:lightning_bolt": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.35, "CooldownInSeconds": 90.0, "AllowCrafting": true }, "irons_spellbooks:ball_lightning": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.945, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "irons_spellbooks:charge": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.001, "CooldownInSeconds": 300.0, "AllowCrafting": false }, "irons_spellbooks:chain_lightning": { "Enabled": true, "School": "irons_spellbooks:lightning", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.225, "CooldownInSeconds": 120.0, "AllowCrafting": true }, "irons_spellbooks:cleanse": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "ias_spellbooks:blazing_imprint": { "Enabled": false, "School": "irons_spellbooks:eldritch", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 120.0, "AllowCrafting": false }, "ias_spellbooks:dragline": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 10.4, "SpellPowerMultiplier": 0.5, "CooldownInSeconds": 84.0, "AllowCrafting": true }, "ias_spellbooks:pumpkin_spice": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 10.4, "SpellPowerMultiplier": 0.5, "CooldownInSeconds": 120.0, "AllowCrafting": false }, "ias_spellbooks:ethereal_grasp": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 2, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 300.0, "AllowCrafting": true }, "ias_spellbooks:restorative_rain": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 1, "MinRarity": "RARE", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 240.0, "AllowCrafting": false }, "ias_spellbooks:silken_breath": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.6, "CooldownInSeconds": 60.0, "AllowCrafting": true }, "ias_spellbooks:hellish_horde": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 2, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 300.0, "AllowCrafting": true }, "ias_spellbooks:ice_cream_sandwich": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 2, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 300.0, "AllowCrafting": true }, "ias_spellbooks:venomous_reborn": { "Enabled": true, "School": "irons_spellbooks:eldritch", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 0.1, "SpellPowerMultiplier": 0.1, "CooldownInSeconds": 300.0, "AllowCrafting": false }, "ias_spellbooks:spirits_chosen": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 5, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 300.0, "AllowCrafting": true }, "irons_spellbooks:perforation": { "Enabled": true, "School": "irons_spellbooks:ender", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 0.8, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 400.0, "AllowCrafting": true }, "irons_spellbooks:bloodfed": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "EPIC", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 30.0, "AllowCrafting": true }, "irons_spellbooks:stun": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 400.0, "AllowCrafting": true }, "irons_spellbooks:fire_power": { "Enabled": true, "School": "irons_spellbooks:fire", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 400.0, "AllowCrafting": true }, "irons_spellbooks:ghost": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 360.0, "AllowCrafting": true }, "irons_spellbooks:ice_power": { "Enabled": true, "School": "irons_spellbooks:ice", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 400.0, "AllowCrafting": true }, "irons_spellbooks:water_breathing": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 400.0, "AllowCrafting": true }, "irons_spellbooks:inebriation": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "COMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 400.0, "AllowCrafting": true }, "codinglitchs_sorcery:taunt": { "Enabled": true, "School": "irons_spellbooks:holy", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 2.5, "SpellPowerMultiplier": 0.0025, "CooldownInSeconds": 40.0, "AllowCrafting": true }, "advs_spells_arts:groundslam": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 35.0, "AllowCrafting": true }, "advs_spells_arts:earthball": { "Enabled": true, "School": "irons_spellbooks:nature", "MaxLevel": 20, "MinRarity": "UNCOMMON", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.15, "CooldownInSeconds": 35.0, "AllowCrafting": true }, "advs_spells_arts:furious_knives": { "Enabled": true, "School": "irons_spellbooks:evocation", "MaxLevel": 20, "MinRarity": "EPIC", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.05, "CooldownInSeconds": 52.0, "AllowCrafting": true }, "advs_spells_arts:raining_sword": { "Enabled": false, "School": "irons_spellbooks:evocation", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.0001, "CooldownInSeconds": 50.0, "AllowCrafting": false }, "advs_spells_arts:snowsquall": { "Enabled": false, "School": "irons_spellbooks:ice", "MaxLevel": 1, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 1.0, "CooldownInSeconds": 100.0, "AllowCrafting": false }, "advs_spells_arts:reap": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "LEGENDARY", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.01, "CooldownInSeconds": 50.0, "AllowCrafting": true }, "advs_spells_arts:hellfist": { "Enabled": true, "School": "irons_spellbooks:blood", "MaxLevel": 20, "MinRarity": "RARE", "ManaCostMultiplier": 1.0, "SpellPowerMultiplier": 0.02, "CooldownInSeconds": 48.0, "AllowCrafting": true } } }

var spellMaxLevels = {};
var bannedSpells = [];

let magicPmmoAPIUtils = Java.loadClass('harmonised.pmmo.api.APIUtils');

for (var spellId in CONFIG_DATA.Spells) {
    var spellData = CONFIG_DATA.Spells[spellId];

    if (spellData.Enabled) {
        var { School, MaxLevel } = spellData;
        spellMaxLevels[spellId] = MaxLevel;
    }
    else {
        bannedSpells.push(spellId);
    }
}

function getPlayerMagicLevel(player) {
    return PmmoAPIUtils.getLevel('magic', player);
}

function getSkillMaxLvl(spellId) {
    return spellMaxLevels[spellId];
}

function isSkillCapped(spellId, spellLvl) {
    return getSkillMaxLvl(spellId) + 4 < spellLvl;
}

function tpPlayer(server, dimension, player_name, x, y, z) {
    server.runCommandSilent(`execute in ${dimension} run tp ${player_name} ${x} ${y} ${z}`);
}

function playerBlockSpellMessage(server, player_name) {
    
    server.runCommandSilent(`/immersivemessages popup ${player_name} 3 "Not Strong enough for this spell" This Spell might not be castable`);
}

function playerBlockCappedSpellMessage(server, player_name) {
    server.runCommandSilent(`/immersivemessages popup ${player_name} 3 "Not Strong enough for this spell" This Spell can nott be casted in such powerful manner`);
}


function playerNotSkilledEnoughForSpell(server, player_name, playerLevel, requiredLevel) {
    server.runCommandSilent(`/immersivemessages popup ${player_name} 3 "Not Strong enough for this spell" This Spell requires Magic lvl ${requiredLevel}. You only have ${playerLevel}`);
}

PlayerEvents.spellOnCast(event => {
    let spellId = event.getSpellId();
    if (spellId == "irons_spellbooks:recall") {

        const { player } = event;
        let player_name = player.name.string;
        let server = event.server;

        if (player.respawnPosition) {
            const { SpawnDimension } = player.nbt || 'minecraft:overworld';
            const { x, y, z } = player.respawnPosition;
            tpPlayer(server, SpawnDimension, player_name, x, y, z);
        }
        else {
            const { level } = event;
            const { x, y, z } = level.getSharedSpawnPos();
            tpPlayer(server, 'minecraft:overworld', player_name, x, y, z);
        }

        event.cancel();
    };
})

PlayerEvents.spellPreCast(event => {
    let spellId = event.getSpellId();
    let spellLevel = event.getSpellLevel();
    let server = event.server;
    const { player } = event;
    let player_name = player.name.string;

    if (bannedSpells.includes(spellId)) {
        playerBlockSpellMessage(server, player_name)
        event.cancel();
    }

    if (isSkillCapped(spellId, spellLevel)) {
        playerBlockCappedSpellMessage(server, player_name)
        event.cancel();
    }

    let playerMagicLevel = getPlayerMagicLevel(player);
    let requiredLevel = (spellLevel - 1) * 5;

    if (spellLevel > 1 && playerMagicLevel < (spellLevel - 1) * 5) {
        playerNotSkilledEnoughForSpell(server, player_name, playerMagicLevel, requiredLevel);
        event.cancel();
    }

});
